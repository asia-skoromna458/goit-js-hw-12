{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"54653333-1a4d24954eec451e3cf04620f\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\n\nexport async function getImagesByQuery(query, page) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n          q: query,\n          page,\n          per_page: 15,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n    },\n  });\n    \n\n  return response.data;\n}\ngetImagesByQuery()\n    .then(data => {\n        console.log(data)\n    })\n    .catch(error => {\n     console.log(error)\n})\n\n\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMore = document.querySelector(\".js-load-more\");\n\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\nexport function createGallery(images) {\n    const markup = images\n        .map(image => {\n            return `\n        <li class=\"gallery-item\">\n          <a href=\"${image.largeImageURL}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n          </a>\n          <div class=\"info\">\n            <p>Likes <span>${image.likes}</span></p>\n            <p>Views <span>${image.views}</span></p>\n            <p>Comments <span>${image.comments}</span></p>\n            <p>Downloads <span>${image.downloads}</span></p>\n          </div>\n        </li>\n      `;\n        })\n        .join(\"\");\n\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\");\n}\nexport function showLoadMoreButton() {\n  loadMore.classList.remove(\"load-more-hidden\");\n  loadMore.classList.add(\"load-more\");\n  \n}\nexport function hideLoadMoreButton() {\n  loadMore.classList.remove(\"load-more\");\n  loadMore.classList.add(\"load-more-hidden\");\n}\n\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\n\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\".form\");\nconst loadMore = document.querySelector(\".js-load-more\");\n\nlet page = 1;\nlet currentQuery = \"\";\nlet loadedImages = 0;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", onFormSubmit);\nloadMore.addEventListener(\"click\", onLoadMore);\n\n// ---------------------------\n// ПЕРШИЙ ЗАПИТ\n// ---------------------------\nasync function onFormSubmit(event) {\n  event.preventDefault();\n\n  const query = event.currentTarget.elements[\"search-text\"].value.trim();\n  currentQuery = query;\n  page = 1;\n  loadedImages = 0;\n\n  if (!query) {\n    iziToast.show({\n      message: \"Please enter a search query\",\n      color: \"red\",\n    });\n    return;\n  }\n\n  clearGallery();\n  hideLoadMoreButton(); // ← приховуємо кнопку перед новим пошуком\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(query, page);\n\n    // ---------------------------\n    // НІЧОГО НЕ ЗНАЙДЕНО\n    // ---------------------------\n    if (data.totalHits === 0) {\n      iziToast.show({\n        message: \"No images found. Try another query.\",\n        color: \"blue\",\n      });\n      return;\n    }\n\n    totalHits = data.totalHits;\n    loadedImages = data.hits.length;\n\n    createGallery(data.hits);\n\n    // ---------------------------\n    // Є ЩЕ СТОРІНКИ?\n    // ---------------------------\n    if (loadedImages < totalHits) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      iziToast.show({\n        message: \"You've reached the end of search results.\",\n        color: \"blue\",\n      });\n    }\n\n  } catch (error) {\n    iziToast.show({\n      message: \"Something went wrong. Please try again later.\",\n      color: \"red\",\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\n// ---------------------------\n// LOAD MORE\n// ---------------------------\nasync function onLoadMore() {\n  page++;\n  hideLoadMoreButton(); // ← кнопка не клікабельна під час завантаження\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, page);\n\n    createGallery(data.hits);\n    smoothScroll();\n\n    loadedImages += data.hits.length;\n\n    // ---------------------------\n    // КІНЕЦЬ РЕЗУЛЬТАТІВ\n    // ---------------------------\n    if (loadedImages >= totalHits) {\n      hideLoadMoreButton();\n      iziToast.show({\n        message: \"You've reached the end of search results.\",\n        color: \"blue\",\n      });\n    } else {\n      showLoadMoreButton();\n    }\n\n  } catch (error) {\n    iziToast.show({\n      message: \"Something went wrong. Please try again later.\",\n      color: \"red\",\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\n// ---------------------------\n// ПЛАВНИЙ СКРОЛ\n// ---------------------------\nfunction smoothScroll() {\n  const card = document.querySelector(\".gallery-item\");\n  if (!card) return;\n\n  const cardHeight = card.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n  });\n}\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","axios","data","error","gallery","loader","loadMore","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","currentQuery","loadedImages","totalHits","onFormSubmit","onLoadMore","event","iziToast","smoothScroll","card","cardHeight"],"mappings":"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"}