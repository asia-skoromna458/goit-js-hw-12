{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"54653333-1a4d24954eec451e3cf04620f\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\n\nexport async function getImagesByQuery(query, page) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n          q: query,\n          page,\n          per_page: 15,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n    },\n  });\n    \n\n  return response.data;\n}\ngetImagesByQuery()\n    .then(data => {\n        console.log(data)\n    })\n    .catch(error => {\n     console.log(error)\n})\n\n\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMore = document.querySelector(\".js-load-more\");\n\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\nexport function createGallery(images) {\n    const markup = images\n        .map(image => {\n            return `\n        <li class=\"gallery-item\">\n          <a href=\"${image.largeImageURL}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n          </a>\n          <div class=\"info\">\n            <p>Likes <span>${image.likes}</span></p>\n            <p>Views <span>${image.views}</span></p>\n            <p>Comments <span>${image.comments}</span></p>\n            <p>Downloads <span>${image.downloads}</span></p>\n          </div>\n        </li>\n      `;\n        })\n        .join(\"\");\n\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\");\n}\nexport function showLoadMoreButton() {\n  loadMore.classList.remove(\"load-more-hidden\");\n  loadMore.classList.add(\"load-more\");\n  \n}\nexport function hideLoadMoreButton() {\n  loadMore.classList.remove(\"load-more\");\n  loadMore.classList.add(\"load-more-hidden\");\n}\n\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\n\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from \"./js/render-functions.js\";\n\nconst loadMore = document.querySelector(\".js-load-more\");\nconst form = document.querySelector(\".form\");\n\nlet page = 1;\nlet currentQuery = \"\";\nlet loadedImages = 0;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", onFormSubmit);\nloadMore.addEventListener(\"click\", onLoadMore);\n\nfunction onFormSubmit(event) {\n    event.preventDefault();\n\n    const query = event.currentTarget.elements[\"search-text\"].value.trim();\n    currentQuery = query;\n    loadedImages = 0;\n    page = 1;\n\n    if (!query) {\n        iziToast.show({\n            message: \"Please enter a search query\",\n            color: \"red\",\n        });\n        return;\n    }\n\n    clearGallery();\n    showLoader();\n\n    getImagesByQuery(query, page)\n        .then(data => {\n            totalHits = data.totalHits;\n            loadedImages = data.hits.length;\n\n            createGallery(data.hits);\n\n            if (loadedImages >= totalHits) {\n                hideLoadMoreButton();\n                iziToast.show({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    color: \"blue\",\n                });\n            } else {\n                showLoadMoreButton();\n            }\n        })\n        .finally(() => hideLoader());\n}\n\nasync function onLoadMore() {\n    page++;\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(currentQuery, page);\n\n        createGallery(data.hits);\n        smoothScroll();\n\n        loadedImages += data.hits.length;\n\n        if (loadedImages >= totalHits) {\n            hideLoadMoreButton();\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                color: \"blue\",\n            });\n        }\n    } finally {\n        hideLoader();\n    }\n}\n\nfunction smoothScroll() {\n    const card = document.querySelector(\".gallery-item\");\n    if (!card) return;\n\n    const cardHeight = card.getBoundingClientRect().height;\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: \"smooth\",\n    });\n}\n\n\n\n\n\n\n\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","axios","data","error","gallery","loader","loadMore","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","currentQuery","loadedImages","totalHits","onFormSubmit","onLoadMore","event","iziToast","smoothScroll","card","cardHeight"],"mappings":"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"}